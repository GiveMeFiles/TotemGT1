<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Logo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
        }
        #ar-logo {
            width: 300px;
            height: 300px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h1>Scan the QR code to see the logo in AR</h1>
    <img id="qr-code" src="qr.png" alt="QR code">
    <div id="ar-logo"></div>

    <script>
        // Get the QR code and logo elements
        const qrCode = document.getElementById('qr-code');
        const arLogo = document.getElementById('ar-logo');

        // Set up the AR scene
        const scene = new XR.Scene();
        const camera = new XR.Camera();
        const renderer = new XR.Renderer({
            canvas: document.createElement('canvas'),
            antialias: true,
        });

        // Load the 3D GLB logo model
        fetch('logo.glb')
            .then(response => response.arrayBuffer())
            .then(buffer => {
                const glb = new XR.GLTFLoader().parse(buffer);
                const logo = glb.scene.children[0];
                logo.scale.set(0.1, 0.1, 0.1); // Adjust the logo scale as needed
                scene.add(logo);
            });

        // Set up the QR code scanner
        const qrScanner = new QRScanner(qrCode, {
            onScan: () => {
                // When the QR code is scanned, start the AR experience
                startARExperience();
            },
        });

        // Start the AR experience
        function startARExperience() {
            // Request access to the camera
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    // Create a video element to display the camera feed
                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.play();

                    // Add the video element to the page
                    arLogo.appendChild(video);

                    // Start the AR renderer
                    renderer.start();
                })
                .catch(error => console.error('Error accessing camera:', error));
        }

        // Render the AR scene
        function render() {
            requestAnimationFrame(render);
            renderer.render(scene, camera);
        }
        render();
    </script>

    <!-- Include the QRScanner library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode-scanner@1.2.0/dist/qrcode-scanner.min.js"></script>

    <!-- Include the AR.js library -->
    <script src="https://cdn.jsdelivr.net/npm/@xr-three/ar.js@1.2.2/dist/ar.js"></script>
</body>
</html>
